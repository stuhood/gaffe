{ "namespace": "gaffe.io",
  "protocol": "Persistence", 
  "doc": "Defines the types used to persist graphs to disk.", 
  "types": [
    {"name": "Value", "type": "record",
     "doc": "A untyped (for now) byte value.",
     "fields": [
       {"name": "value", "type": "bytes"}
    ]},
    {"name": "VertexRef", "type": "record",
     "doc": "A reference to a vertex persisted in this or another generation.",
     "fields": [
       {"name": "gen", "type": "long",
        "doc": "The generation number/file containing the vertex, or -1 for the current generation."},
       {"name": "block", "type": "long",
        "doc": "The block number containing the vertex within the generation, or -1 if unknown."}
    ]},
    {"name": "Vertex", "type": "record",
     "doc": "A  vertex.",
     "fields": [
       {"name": "name", "type": "Value"},
       {"name": "ref", "type": ["VertexRef", "null"]}
    ]},
    {"name": "OutEdge", "type": "record",
     "doc": "An outbound edge.",
     "fields": [
       {"name": "label", "type": "Value",
        "doc": "Rather than a name, edges have a label, which makes the identity of an edge a triple of (src.name, label, dest.name)."},
       {"name": "dest", "type": "Vertex"}
    ]},
    {"name": "Path", "type": "record",
     "doc": "A vertex and list of edges defining a path.",
     "fields": [
       {"name": "source", "type": "Vertex"},
       {"name": "edges", "type": {"type": "array", "items": "OutEdge"}}
    ]},
    {"name": "Range", "type": "record",
     "doc": "An ordered pair of Paths that share a prefix: 'end' is a replacement suffix for 'begin'.",
     "fields": [
       {"name": "begin", "type": "Path"},
       {"name": "end", "type": "Path"}
    ]},
    {"name": "Chunk", "type": "record",
     "doc": "The largest unit in a gaffe data file. Chunks are always written as pairs, with a Range followed by an array of OutEdges. A 'range' Chunk describes the range of paths found in the following 'edge' chunk, and allows it to be skipped without deserialization.",
     "fields": [
       {"name": "range", "type": ["Range", "null"]},
       {"name": "edges", "type": {"type": "array", "items": "OutEdge"}}
    ]}
  ]
}
